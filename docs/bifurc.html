<!DOCTYPE html>
<html>
<head>
<style>
body {
    background-color: #0B2752;font-family: sans-serif;  margin: 0
}
h1 {
    background-color: #0B2752;font-family: sans-serif;
}
p {
    background-color: #0B2752; font-family: sans-serif;
}
</style>
<script src="https://unpkg.com/3d-force-graph"></script>
<script src="https://d3js.org/d3.v4.min.js"></script>

<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
</head>
<body>
  <h1 style="color: white;"> 4-Leaf Multifurcation</h1>
  <p style="color:white; font-size:20px">Interactive force directed layout of VIA graph colored by pseudotime</p>
  <!--<p> Interactive force directed layout of VIA graph colored by pseudotime</p>-->
  <div id="3d-graph"></div>
  <script>
  var gData = {
    "nodes": [
      {
        "group": "M3",
        "pseudotime": 2,
        "val": 9,
        "id": 0
      },
      {
        "group": "M5",
        "pseudotime": 5,
        "val": 7,
        "id": 1
      },
      {
        "group": "M7",
        "pseudotime": 5,
        "val": 7,
        "id": 2
      },
      {
        "group": "M3",
        "pseudotime": 1,
        "val": 4,
        "id": 3
      },
      {
        "group": "M7",
        "pseudotime": 6,
        "val": 5,
        "id": 4
      },
      {
        "group": "M6",
        "pseudotime": 6,
        "val": 5,
        "id": 5
      },
      {
        "group": "M1",
        "pseudotime": 0,
        "val": 3,
        "id": 6
      },
      {
        "group": "M2",
        "pseudotime": 7,
        "val": 4,
        "id": 7
      },
      {
        "group": "M5",
        "pseudotime": 6,
        "val": 4,
        "id": 8
      },
      {
        "group": "M4",
        "pseudotime": 7,
        "val": 4,
        "id": 9
      },
      {
        "group": "M5",
        "pseudotime": 4,
        "val": 4,
        "id": 10
      },
      {
        "group": "M8",
        "pseudotime": 7,
        "val": 2,
        "id": 11
      },
      {
        "group": "M3",
        "pseudotime": 4,
        "val": 3,
        "id": 12
      }
    ],
    "links": [
      {
        "weight": 8.0,
        "val": 7.0,
        "distance": 25.0,
        "source": 0,
        "target": 12.0
      },
      {
        "weight": 2.0,
        "val": 4.0,
        "distance": 100.0,
        "source": 0,
        "target": 10.0
      },
      {
        "weight": 5.5,
        "val": 4.0,
        "distance": 36.36363636,
        "source": 1,
        "target": 8.0
      },
      {
        "weight": 2.0,
        "val": 2.0,
        "distance": 100.0,
        "source": 1,
        "target": 5.0
      },
      {
        "weight": 8.0,
        "val": 3.0,
        "distance": 25.0,
        "source": 2,
        "target": 4.0
      },
      {
        "weight": 3.0,
        "val": 7.0,
        "distance": 66.66666667,
        "source": 3,
        "target": 0.0
      },
      {
        "weight": 2.0,
        "val": 5.0,
        "distance": 100.0,
        "source": 4,
        "target": 11.0
      },
      {
        "weight": 2.0,
        "val": 5.0,
        "distance": 100.0,
        "source": 4,
        "target": 7.0
      },
      {
        "weight": 3.0,
        "val": 9.0,
        "distance": 66.66666667,
        "source": 6,
        "target": 3.0
      },
      {
        "weight": 5.5,
        "val": 4.0,
        "distance": 36.36363636,
        "source": 8,
        "target": 9.0
      },
      {
        "weight": 5.5,
        "val": 4.0,
        "distance": 36.36363636,
        "source": 10,
        "target": 1.0
      },
      {
        "weight": 3.0,
        "val": 3.0,
        "distance": 66.66666667,
        "source": 11,
        "target": 7.0
      },
      {
        "weight": 3.0,
        "val": 4.0,
        "distance": 66.66666667,
        "source": 12,
        "target": 2.0
      }
    ]
  }
    var colors = d3.scaleSequential().domain([10,1])
      .interpolator(d3.interpolateViridis);
    const Graph = ForceGraph3D({ controlType: 'orbit' })
    (document.getElementById('3d-graph'))
      //.jsonUrl('https://raw.githubusercontent.com/vasturiano/3d-force-graph/master/example/datasets/miserables.json')
      //.jsonUrl('file://localhost/home/shobi/JavaCode/basicgraph/bifurc.json')
      //https://stackoverflow.com/questions/50360821/how-do-i-influence-link-distance-in-3d-force-graph
      .nodeLabel('id')
      //.nodeAutoColorBy('val')
      //.nodeVal(5) //size of nodes
      .graphData(gData)
      .nodeColor(d=>colors(d.pseudotime))
      .nodeLabel(d=>d.group)
      .linkWidth('weight')
      .d3Force("link", d3.forceLink().distance(d => d.distance))
      .linkDirectionalArrowLength(10)
      .linkColor(link => 'gray' )
      .linkOpacity(0.5)
      .d3Force("charge", d3.forceManyBody().theta(0.5).strength(-100))
      .linkDirectionalParticles('val')
      .linkDirectionalParticleSpeed(d => d.val*0.001)
      .linkDirectionalParticleWidth(3);
  </script>
</body>
</html>
